---
sidebar_position: 4
slug: "/reference-docs/ai-tasks/llm-store-embeddings"
description: "The LLM Store Embeddings task stores embeddings in a vector database."
---


import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# LLM Store Embeddings

The LLM Store Embeddings task is used to store the generated embeddings produced by the [LLM Generate Embeddings](/reference-docs/ai-tasks/llm-generate-embeddings) task in a vector database. The stored embeddings serve as a repository of information that can be later accessed by the [LLM Get Embeddings](/reference-docs/ai-tasks/llm-get-embeddings) task for efficient and quick retrieval of related data.

The LLM Store Embeddings task takes the embeddings generated by the LLM Generate Embeddings task and stores them in a specified vector database. This involves specifying parameters such as the vector database provider, index, namespace, and embedding model details. The task ensures the embeddings are organized and accessible for future retrieval operations.

:::info Prerequisites

- [Integrate the required AI model](/category/integrations/ai-llm) with Orkes Conductor.
- [Integrate the required vector database](/category/integrations/vector-databases) with Orkes Conductor.
:::


## Task parameters 

Configure these parameters for the LLM Store Embeddings task.

| Parameter | Description | Required/ Optional | 
| --------- | ----------- | ----------------- |
| inputParameters.**vectorDB** | The vector database to store the data.<br/><br/>**Note**: If you haven’t configured the vector database on your Orkes Conductor cluster, navigate to the **Integrations** tab and [configure your required provider](/category/integrations/vector-databases).  | Required. |
| inputParameters.**index** | The index in your vector database where the text or data will be stored.<br/><br/>The terminology of the index field varies depending on the integration:<ul><li>For Weaviate, the index field indicates the collection name.</li><li>For other integrations, it denotes the index name.</li></ul> | Required. |
| inputParameters.**namespace** | Namespaces are separate isolated environments within the database to manage and organize vector data effectively. Choose from the available namespace configured within the chosen vector database.<br/><br/>The usage and terminology of the namespace field vary depending on the integration:<ul><li>For Pinecone, the namespace field is applicable.</li><li>For Weaviate, the namespace field is not applicable.</li><li>For MongoDB, the namespace field is referred to as “Collection” in MongoDB.</li><li>For Postgres, the namespace field is referred to as “Table” in Postgres.</li></ul> | Required. | 
| inputParameters.**id** | An arbitrary vector ID to identify the vector in the database. | Optional. | 
| inputParameters.**embeddingModelProvider** | The LLM provider used for generating the embeddings.<br/><br/>**Note**: If you haven’t configured your AI/LLM provider on your Orkes console, navigate to the **Integrations** tab and [configure your required provider](/category/integrations/ai-llm). | Required. | 
| inputParameters.**embeddingModel** | The embedding model provided by the selected LLM provider to generate the embeddings. | Required. |
| inputParameters.**embeddings** | The vector representation of the input text, generated by an embedding model. This value is used to store vectors in the vector database or to perform similarity search. | Required. | 
| inputParameters.**metadata** | A map of key value pairs associated with the embeddings. Metadata is stored alongside the vectors and can include additional context, such as the original text or identifiers, to enrich retrieval results. | Optional. | 

The following are generic configuration parameters that can be applied to the task and are not specific to the LLM Store Embeddings task.

<details>
<summary>Caching parameters</summary>

You can cache the task outputs using the following parameters. Refer to [Caching Task Outputs](/faqs/task-cache-output) for a full guide.

| Parameter | Description | Required/ Optional | 
| --------- | ----------- | ----------------- | 
| cacheConfig.**ttlInSecond** | The time to live in seconds, which is the duration for the output to be cached. | Required if using *cacheConfig*. |
| cacheConfig.**key** | The cache key is a unique identifier for the cached output and must be constructed exclusively from the task’s input parameters.<br/>It can be a string concatenation that contains the task’s input keys, such as `${uri}-${method}` or `re_${uri}_${method}`. | Required if using *cacheConfig*. |

</details>

<details>
<summary>Schema parameters</summary>

You can enforce input/output validation for the task using the following parameters. Refer to [Schema Validation](/developer-guides/schema-validation) for a full guide.

| Parameter | Description | Required/ Optional | 
| --------- | ----------- | ----------------- | 
| taskDefinition.**enforceSchema** | Whether to enforce schema validation for task inputs/outputs. Set to *true* to enable validation. | Optional. | 
| taskDefinition.**inputSchema** | The name and type of the input schema to be associated with the task. | Required if *enforceSchema* is set to true. | 
| taskDefinition.**outputSchema** | The name and type of the output schema to be associated with the task. | Required if *enforceSchema* is set to true.

</details>

<details>
<summary>Other generic parameters</summary>

Here are other parameters for configuring the task behavior.

| Parameter | Description | Required/ Optional | 
| --------- | ----------- | ----------------- | 
| optional | Whether the task is optional. <br/><br/>If set to`true`, any task failure is ignored, and the workflow continues with the task status updated to `COMPLETED_WITH_ERRORS`. However, the task must reach a terminal state. If the task remains incomplete, the workflow waits until it reaches a terminal state before proceeding. | Optional. | 

</details>

## Task configuration

This is the task configuration for an LLM Store Embeddings task.

```json
{
  "name": "llm_store_embeddings",
  "taskReferenceName": "llm_store_embeddings_ref",
  "inputParameters": {
    "vectorDB": "pineconedb",
    "index": "test",
    "namespace": "myNewModel",
    "embeddingModelProvider": "azure_openai",
    "embeddingModel": "text-davinci-003",
    "id": "xxxxxx"
  },
  "type": "LLM_STORE_EMBEDDINGS"
}
```

## Task output

There is no output. The LLM Store Embeddings task will store the embeddings in the specified vector database. 

## Adding an LLM Store Embeddings task in UI

**To add an LLM Store Embeddings task:**

1. In your workflow, select the (**+**) icon and add an **LLM Store Embeddings** task.
2. Choose the **Vector database**, **Index**, and **Namespace** to store the embeddings.
3. In **Vector ID**, enter an arbitrary ID to identify the vector in the database.
4. Choose the **Embedding model provider** and **Embedding model** used to generate the embeddings.
5. In **Embeddings**, provide the embedding vectors to store. This is typically the output of an LLM Generate Embeddings task.
6. (Optional) In **Metadata**, add key value pairs to store additional context with the embeddings, such as the original text or document identifiers.

<center><p><img src="/content/img/llm-store-embeddings-ui.png" alt="LLM Store Embeddings Task - UI" width="80%" height="auto"/></p></center>

## Examples

Here are some examples for using the LLM Store Embeddings task.

<details>
<summary>Using an LLM Store Embeddings task in a workflow</summary>

See an example of [building a question answering workflow using stored embeddings](http://orkes.io/content/tutorials/question-answering-with-embeddings).

</details>